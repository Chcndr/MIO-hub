{
  "version": 3,
  "last_updated": "2025-11-24T12:00:00Z",
  "agents": [
    {
      "id": "mio",
      "display_name": "MIO",
      "roles": ["orchestrator"],
      "description": "Orchestratore centrale - gestisce la chat MIO HUB e coordina gli altri agenti",
      "rules": [
        {
          "endpoint_id": "mihub.tasks.list",
          "modes": ["read"],
          "max_risk": "medium",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.tasks.create",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.orchestrator.run",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.getLogs",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.createLog",
          "modes": ["write"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "github.repo.contents",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        }
      ],
      "restrictions": [
        "NO PUT su repository GitHub",
        "NO deploy Vercel",
        "NO migrazioni database"
      ]
    },
    {
      "id": "dev",
      "display_name": "Dev (GPT-5.1)",
      "roles": ["developer"],
      "description": "Agente di sviluppo principale - backend, frontend, infra",
      "rules": [
        {
          "endpoint_id": "github.repo.contents",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "github.repo.file.upsert",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": true
        },
        {
          "endpoint_id": "mihub.tasks.list",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.tasks.create",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.orchestrator.run",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.deploy.vercel",
          "modes": ["write"],
          "max_risk": "high",
          "require_confirmation": true
        },
        {
          "endpoint_id": "logs.createLog",
          "modes": ["write"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.getLogs",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        }
      ],
      "permissions": [
        "GET/PUT su /repos/{owner}/{repo}/contents/{path} del workspace DMS/MIO-HUB",
        "POST /mihub/deploy/vercel",
        "Chiamate agli endpoint backend MIHUB necessari per sviluppo/test"
      ]
    },
    {
      "id": "manus_worker",
      "display_name": "Manus Worker",
      "roles": ["operator", "tester"],
      "description": "Operativo umano - browser, test manuali, screenshot, verifiche app live (NESSUN write su GitHub/deploy)",
      "rules": [
        {
          "endpoint_id": "markets.list",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "markets.getById",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "stalls.listByMarket",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.getLogs",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.createLog",
          "modes": ["write"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.tasks.list",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "github.repo.contents",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "guardian.debug.testEndpoint",
          "modes": ["write"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "github.repo.file.upsert",
          "modes": ["deny"],
          "max_risk": "high",
          "require_confirmation": true
        },
        {
          "endpoint_id": "mihub.deploy.vercel",
          "modes": ["deny"],
          "max_risk": "high",
          "require_confirmation": true
        }
      ],
      "restrictions": [
        "VIETATO: PUT su repository GitHub",
        "VIETATO: POST /mihub/deploy/vercel",
        "VIETATO: Migrazioni database",
        "VIETATO: Modifiche al codice sorgente"
      ],
      "permissions": [
        "GET sulle app live (Vercel, Hetzner)",
        "GET contenuti repository",
        "Test e verifiche manuali via browser",
        "POST su endpoint di test non distruttivi (es. /api/guardian/debug/testEndpoint)",
        "Screenshot e documentazione"
      ]
    },
    {
      "id": "gemini_arch",
      "display_name": "Gemini Arch (Gemini 3 Pro)",
      "roles": ["architect", "reviewer"],
      "description": "Analisi architettura, review blueprint, design sistemi (SOLO LETTURA)",
      "rules": [
        {
          "endpoint_id": "github.repo.contents",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "logs.getLogs",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "mihub.tasks.list",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        }
      ],
      "restrictions": [
        "SOLO LETTURA su repository",
        "SOLO LETTURA su blueprint",
        "SOLO LETTURA su log",
        "NESSUNA azione scrivente"
      ],
      "permissions": [
        "Lettura repository (file blueprint, codice)",
        "Lettura log Guardian (GET /api/logs/getLogs)",
        "Analisi e review architettura"
      ]
    },
    {
      "id": "abacus",
      "display_name": "Abacus",
      "roles": ["tester", "web-runner"],
      "description": "Agente di test e automazione web (legacy)",
      "rules": [
        {
          "endpoint_id": "mihub.tasks.list",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        },
        {
          "endpoint_id": "github.repo.contents",
          "modes": ["read"],
          "max_risk": "low",
          "require_confirmation": false
        }
      ]
    },
    {
      "id": "zapier",
      "display_name": "Zapier",
      "roles": ["automation"],
      "description": "Automazione workflow esterni",
      "rules": [
        {
          "endpoint_id": "mihub.tasks.create",
          "modes": ["write"],
          "max_risk": "medium",
          "require_confirmation": true
        }
      ]
    }
  ],
  "guardian": {
    "type": "infrastructure_module",
    "description": "Modulo infrastrutturale (non LLM) che mantiene regole rischio, log, controllo permessi",
    "responsibilities": [
      "Validazione permessi agenti",
      "Logging centralizzato",
      "Gestione livelli di rischio",
      "Richiesta conferme per azioni ad alto rischio"
    ]
  },
  "defaults": {
    "high_risk": {
      "require_confirmation": true
    },
    "unknown_endpoint": {
      "allow": false
    },
    "unknown_agent": {
      "allow": false,
      "default_risk": "high"
    }
  }
}
