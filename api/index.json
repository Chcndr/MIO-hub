{
  "version": 3,
  "last_updated": "2025-11-21T18:30:00Z",
  "services": [
    {
      "id": "dms-hub",
      "display_name": "DMS HUB API",
      "base_url": "https://mihub.157-90-29-66.nip.io",
      "env": "production",
      "description": "API centralizzate per gestione completa mercati, posteggi, operatori",
      "endpoints": [
        {
          "id": "markets.importFromSlotEditor",
          "method": "POST",
          "path": "/api/dmsHub/markets/importFromSlotEditor",
          "category": "Mercati",
          "description": "Import JSON completo da Slot Editor v3 (manuale)",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede JSON completo Slot Editor v3"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "markets.importAuto",
          "method": "POST",
          "path": "/api/dmsHub/markets/importAuto",
          "category": "Mercati",
          "description": "Import automatico da Slot Editor v3 (senza nome/citt\u00e0)",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede JSON grezzo Slot Editor v3"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "markets.list",
          "method": "GET",
          "path": "/api/dmsHub/markets/list",
          "category": "Mercati",
          "description": "Lista mercati con statistiche",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "markets.getById",
          "method": "GET",
          "path": "/api/dmsHub/markets/getById",
          "category": "Mercati",
          "description": "Dettagli mercato completo (geometria, posteggi, marker, aree)",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "id": 1
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "stalls.listByMarket",
          "method": "GET",
          "path": "/api/dmsHub/stalls/listByMarket",
          "category": "Posteggi",
          "description": "Lista posteggi per mercato",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "marketId": 1
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "stalls.updateStatus",
          "method": "POST",
          "path": "/api/dmsHub/stalls/updateStatus",
          "category": "Posteggi",
          "description": "Aggiorna stato posteggio (free/occupied/reserved/maintenance)",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_body": {
              "stallId": 1,
              "status": "occupied"
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "stalls.getStatuses",
          "method": "GET",
          "path": "/api/dmsHub/stalls/getStatuses",
          "category": "Posteggi",
          "description": "Stati real-time posteggi mercato",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "marketId": 1
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "vendors.list",
          "method": "GET",
          "path": "/api/dmsHub/vendors/list",
          "category": "Operatori",
          "description": "Lista operatori",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "vendors.create",
          "method": "POST",
          "path": "/api/dmsHub/vendors/create",
          "category": "Operatori",
          "description": "Crea operatore",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede dati completi operatore"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "vendors.update",
          "method": "PUT",
          "path": "/api/dmsHub/vendors/update",
          "category": "Operatori",
          "description": "Aggiorna operatore",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede ID e dati aggiornati"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "vendors.getFullDetails",
          "method": "GET",
          "path": "/api/dmsHub/vendors/getFullDetails",
          "category": "Operatori",
          "description": "Dettagli completi operatore (posteggi, prenotazioni, presenze)",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "vendorId": 1
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "bookings.create",
          "method": "POST",
          "path": "/api/dmsHub/bookings/create",
          "category": "Prenotazioni",
          "description": "Prenota posteggio",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede vendorId, stallId, date"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "bookings.listActive",
          "method": "GET",
          "path": "/api/dmsHub/bookings/listActive",
          "category": "Prenotazioni",
          "description": "Prenotazioni attive",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "bookings.confirmCheckin",
          "method": "POST",
          "path": "/api/dmsHub/bookings/confirmCheckin",
          "category": "Prenotazioni",
          "description": "Conferma check-in",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede bookingId"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "bookings.cancel",
          "method": "DELETE",
          "path": "/api/dmsHub/bookings/cancel",
          "category": "Prenotazioni",
          "description": "Cancella prenotazione",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede bookingId"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "presences.checkout",
          "method": "POST",
          "path": "/api/dmsHub/presences/checkout",
          "category": "Presenze",
          "description": "Check-out operatore",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede presenceId"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "presences.getTodayByMarket",
          "method": "GET",
          "path": "/api/dmsHub/presences/getTodayByMarket",
          "category": "Presenze",
          "description": "Presenze oggi per mercato",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "marketId": 1
            },
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "inspections.create",
          "method": "POST",
          "path": "/api/dmsHub/inspections/create",
          "category": "Controlli",
          "description": "Crea controllo Polizia",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede dati controllo completi"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "inspections.list",
          "method": "GET",
          "path": "/api/dmsHub/inspections/list",
          "category": "Controlli",
          "description": "Lista controlli",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "violations.create",
          "method": "POST",
          "path": "/api/dmsHub/violations/create",
          "category": "Verbali",
          "description": "Emetti verbale",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Richiede dati verbale completi"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "violations.list",
          "method": "GET",
          "path": "/api/dmsHub/violations/list",
          "category": "Verbali",
          "description": "Lista verbali",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "gis.health",
          "method": "GET",
          "path": "/api/gis/health",
          "category": "GIS",
          "description": "Health check modulo GIS",
          "risk_level": "low",
          "require_auth": false,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "Implemented in routes/gis.js"
        },
        {
          "id": "gis.marketMap",
          "method": "GET",
          "path": "/api/gis/market-map",
          "category": "GIS",
          "description": "Dati mappa mercato da Editor v3 (GeoJSON)",
          "risk_level": "low",
          "require_auth": false,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "Implemented in routes/gis.js - Serves editor-v3-sample.json"
        }
      ]
    },
    {
      "id": "mio-agent",
      "display_name": "MIO Agent Logs",
      "base_url": "https://mihub.157-90-29-66.nip.io",
      "env": "production",
      "description": "API per logging e monitoraggio agenti MIO",
      "endpoints": [
        {
          "id": "logs.initSchema",
          "method": "POST",
          "path": "/api/logs/initSchema",
          "category": "MIO Agent",
          "description": "Inizializza tabella mio_agent_logs",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Eseguire solo una volta"
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "logs.createLog",
          "method": "POST",
          "path": "/api/logs/createLog",
          "category": "MIO Agent",
          "description": "Crea nuovo log agente",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_body": {
              "agent": "mio",
              "action": "test",
              "status": "success"
            },
            "expected_status": 201
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "logs.getLogs",
          "method": "GET",
          "path": "/api/logs/getLogs",
          "category": "MIO Agent",
          "description": "Recupera log agenti",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "trpc",
          "implementation_note": "tRPC router exists, REST adapter needed"
        },
        {
          "id": "logs.stats",
          "method": "GET",
          "path": "/api/logs/stats",
          "category": "MIO Agent",
          "description": "Statistiche log agenti (totale, success, failed, unique agents)",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "REST endpoint implemented in mihub-backend-rest/routes/logs.js"
        }
      ]
    },
    {
      "id": "mihub-backend",
      "display_name": "MIHUB Backend",
      "base_url": "https://mihub.157-90-29-66.nip.io",
      "env": "production",
      "description": "Multi-Agent System (MIO, Manus, Abacus, Zapier)",
      "endpoints": [
        {
          "id": "mihub.tasks.list",
          "method": "GET",
          "path": "/api/mihub/tasks",
          "category": "Guardian API",
          "description": "Lista tutti i task MIHUB (filtrabili per progetto)",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "planned",
          "implementation_note": "tRPC + REST to be implemented"
        },
        {
          "id": "mihub.tasks.create",
          "method": "POST",
          "path": "/api/mihub/tasks",
          "category": "Guardian API",
          "description": "Crea un nuovo task MIHUB",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_body": {
              "project": "dms-gemello-news",
              "title": "Task di test",
              "type": "code-change"
            },
            "expected_status": 201
          },
          "implemented": "planned",
          "implementation_note": "tRPC + REST to be implemented"
        },
        {
          "id": "mihub.deploy.vercel",
          "method": "POST",
          "path": "/api/mihub/deploy/vercel",
          "category": "Guardian API",
          "description": "Crea una richiesta di deploy su Vercel per un progetto",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Endpoint ad alto rischio, solo produzione reale"
          },
          "implemented": "planned",
          "implementation_note": "tRPC + REST to be implemented"
        },
        {
          "id": "mihub.orchestrator.run",
          "method": "POST",
          "path": "/api/mihub/orchestrator",
          "category": "mio_agent",
          "description": "Orchestratore multi-agente MIO - coordina mio, dev, manus_worker, gemini_arch",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_body": {
              "mode": "auto",
              "conversationId": null,
              "message": "Test orchestrator",
              "meta": {}
            },
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "Backend REST implementato su mihub-backend-rest"
        },
        {
          "id": "guardian.health",
          "method": "GET",
          "path": "/api/guardian/health",
          "category": "Guardian API",
          "description": "System health check - verifica stato endpoint Guardian e database",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {},
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "REST endpoint implemented in mihub-backend-rest/routes/guardian.js"
        },
        {
          "id": "guardian.debug.testEndpoint",
          "method": "POST",
          "path": "/api/guardian/debug/testEndpoint",
          "category": "Guardian API",
          "description": "Test endpoint generico - permette di testare qualsiasi endpoint con payload personalizzato",
          "risk_level": "medium",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_body": {
              "endpoint": "/api/logs/stats",
              "method": "GET"
            },
            "expected_status": 200
          },
          "implemented": "rest",
          "implementation_note": "REST endpoint implemented in mihub-backend-rest/routes/guardian.js"
        },
        {
          "id": "admin.secrets.store",
          "method": "POST",
          "path": "/admin/secrets",
          "category": "secrets",
          "description": "Salva o aggiorna un secret cifrato (API key, token)",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Endpoint admin, solo utente umano"
          },
          "implemented": "rest",
          "implementation_note": "Cifratura AES-256-GCM, solo admin"
        },
        {
          "id": "admin.secrets.list",
          "method": "GET",
          "path": "/admin/secrets",
          "category": "secrets",
          "description": "Lista metadata dei secret (senza valori)",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Endpoint admin, solo utente umano"
          },
          "implemented": "rest",
          "implementation_note": "Ritorna solo name, scope, last4, updated_at"
        }
      ]
    },
    {
      "id": "github-api",
      "display_name": "GitHub REST API",
      "base_url": "https://api.github.com",
      "env": "production",
      "description": "API GitHub per gestione repository",
      "endpoints": [
        {
          "id": "github.repo.contents",
          "method": "GET",
          "path": "/repos/{owner}/{repo}/contents/{path}",
          "category": "Guardian API",
          "description": "Legge il contenuto di un file in un repository GitHub",
          "risk_level": "low",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": true,
            "default_params": {
              "owner": "Chcndr",
              "repo": "MIO-hub",
              "path": "README.md"
            },
            "expected_status": 200
          },
          "implemented": "planned",
          "implementation_note": "REST-only endpoint, no tRPC needed"
        },
        {
          "id": "github.repo.file.upsert",
          "method": "PUT",
          "path": "/repos/{owner}/{repo}/contents/{path}",
          "category": "Guardian API",
          "description": "Crea o aggiorna un file in un repository GitHub",
          "risk_level": "high",
          "require_auth": true,
          "enabled": true,
          "test": {
            "enabled": false,
            "note": "Scrittura su repo: usare solo con conferma"
          },
          "implemented": "planned",
          "implementation_note": "REST-only endpoint, no tRPC needed"
        }
      ]
    }
  ]
}